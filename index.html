<!DOCTYPE html>

<html id="html" lang="en-us">
	<head>
	<meta name="generator" content="Hugo 0.147.8">
		<meta http-equiv="content-type" content="text/html;charset=utf-8">
		<meta name="viewport" content="width=device-width"/>

		<title>
			Terrastate
		</title>

		<meta name="description" content="Terraform HTTP remote state storage">
		<meta name="author" content="Thomas Boerger">

		<link rel="stylesheet" href="syntax.css" />

<style type="text/css">
	body,
	div,
	dl,
	dt,
	dd,
	ul,
	ol,
	li,
	h1,
	h2,
	h3,
	h4,
	h5,
	h6,
	pre,
	form,
	fieldset,
	input,
	textarea,
	p,
	blockquote,
	th,
	td {
		margin: 0;
		padding: 0;
	}

	* {
		-webkit-box-sizing: border-box;
		-moz-box-sizing: border-box;
		box-sizing: border-box;
	}

	:before,
	:after {
		-webkit-box-sizing: border-box;
		-moz-box-sizing: border-box;
		box-sizing: border-box;
	}

	img,
	object,
	embed {
		max-width: 100%;
		height: auto;
	}

	object,
	embed {
		height: 100%;
	}

	img {
		margin: 1.25% 0;
		-ms-interpolation-mode: bicubic;
	}

	html {
		background-color: #F0F1F3;
		padding: 2%;
	}

	body {
		font-size: 16px;
		line-height: 1.6;
		font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
		color: #242424;
		max-width: 800px;
		margin: 5% auto;
	}

	body::after {
		clear: both;
		content: "";
		display: table;
	}

	header {
		margin-bottom: 8%;
	}

	footer {
		text-align: center;
	}

	h1,
	h2,
	h3,
	h4,
	h5,
	h1 a {
		color: #263A48;
		font-weight: 500;
		text-decoration: none;
	}

	h1,
	h2 {
		font-size: 36px;
		padding-bottom: 0.3em;
		margin-bottom: 0.4em;
		border-bottom: 1px solid #eee
	}

	h2 {
		font-size: 22px;
		padding-bottom: 0.6em;
		margin-bottom: 0.6em;
		margin-top: 2.5em;
	}

	h3 {
		font-size: 18px;
		margin-bottom: 0.3em;
	}

	h1 small a {
		color: #98999C;
		font-size: 15px;
		font-weight: normal;
		float: right;
		position: absolute;
		top: 15px;
		right: 20px;
	}

	section {
		background: #fff;
		margin-bottom: 1%;
		position: relative;
		padding: 6% 8%;
	}

	blockquote {
		border-left: 3px solid #d54e21;
		font-size: 16px;
		padding: 0 0 0 20px;
		color: #d54e21;
	}

	blockquote a {
		color: #d54e21;
		font-weight: 500;
	}

	blockquote code {
		color: #d54e21;
	}

	.highlight pre {
		padding: 10px;
	}

	.highlight {
		margin-bottom: 4%;
	}

	a {
		color: #1e8cbe;
		text-decoration: underline;
	}

	a:hover {
		color: #d54e21;
	}

	ul {
		list-style: none;
	}

	ol {
		list-style: number;
	}

	ol li {
		color: #98999C;
		margin-bottom: 5px;
	}

	ol li:last-child {
		margin-bottom: 0;
	}

	p,
	ul,
	ol,
	blockquote {
		margin-bottom: 4%;
	}

	ul ul {
		padding-top: 0;
		margin-bottom: 0;
		margin-left: 4%;
	}

	ul ul li:before {
		content: '-';
		display: inline-block;
		padding-right: 2%;
	}

	ul.col-2 {
		color: #98999C;
		-webkit-column-count: 2;
		-moz-column-count: 2;
		column-count: 2;
		-webkit-column-gap: 20px;
		-moz-column-gap: 20px;
		column-gap: 20px;
	}

	dl dt {
		font-weight: bold;
	}

	dl dd {
		padding-left: 10px;
	}

	@media screen and (min-width: 500px) {
		ul.col-2 {
			-webkit-column-count: 3;
			-moz-column-count: 3;
			column-count: 3;
			-webkit-column-gap: 20px;
			-moz-column-gap: 20px;
			column-gap: 20px;
		}
	}

	nav {
		background: #F0F1F3;
		min-width: 215px;
		margin-bottom: 5px;
		margin-top: 15px;
	}

	nav:first-of-type a {
		color: #d54e21;
		border-radius: 0;
	}

	nav:first-of-type a:hover {
		color: #d54e21;
	}

	nav:first-of-type a:before {
		background-color: #d54e21;
	}

	nav.affix {
		position: fixed;
		top: 20px;
	}

	nav.affix-bottom {
		position: absolute;
	}

	nav a {
		border-radius: 3px;
		font-size: 15px;
		display: block;
		cursor: pointer;
		font-weight: 500;
		position: relative;
		text-decoration: none;
		padding: 10px 12px;
		width: 100%;
		padding-right: 3px;
		border-bottom: 2px solid #fff;
	}

	nav a:before {
		content: '';
		width: 4px;
		display: block;
		left: 0;
		position: absolute;
		height: 100%;
		display: none;
		background: #1e8cbe;
		top: 0;
	}

	nav a:hover {
		background-color: #E6E8EA;
		color: #1e8cbe;
		text-decoration: underline;
	}

	nav a:hover:before {
		display: block;
	}

	nav a:last-of-type {
		border-bottom: none;
	}

	.gist {
		margin-top: 5.1%;
		margin-bottom: 5%;
	}

	@media screen and (max-width: 1050px) {
		body {
			margin: 0 auto;
		}
	}

	@media screen and (max-width: 767px) {
		header span {
			display: none;
		}

		h1 {
			font-size: 26px;
		}

		h2 {
			font-size: 20px;
		}
	}

	@media screen and (max-width: 514px) {

		p,
		ul,
		ol,
		blockquote {
			margin-bottom: 8%;
		}
	}
</style>

	</head>

	<body>
		<section id="Menu">
			<header>
				<h1>
					Terrastate
				</h1>

				<p>
					Terraform HTTP remote state storage
				</p>
			</header>

			<nav>
				
					<a href="#about">
						About
					</a>
				
					<a href="#getting-started">
						Getting Started
					</a>
				
					<a href="#building">
						Building
					</a>
				
					<a href="#license">
						License
					</a>
				
			</nav>
		</section>

		
			<section id="about">
				<h1>
					<a href="#about">
						About
					</a>

					<small>
						<a href="#html">
							Back to Top
						</a>
					</small>
				</h1>

				This service provides the Terraform Remote State API. You don&rsquo;t need to store
your Terraform state within S3 or some other service similar to that, you can
just use this small service on your own infrastructure.
			</section>
		
			<section id="getting-started">
				<h1>
					<a href="#getting-started">
						Getting Started
					</a>

					<small>
						<a href="#html">
							Back to Top
						</a>
					</small>
				</h1>

				<h2 id="installation">Installation</h2>
<p>So far we are offering only a few different variants for the installation. You
can choose between <a href="https://www.docker.com/">Docker</a> or pre-built binaries which are stored on
our download mirror and GitHub releases. Maybe we will also provide system
packages for the major distributions later if we see the need for it.</p>
<h3 id="docker">Docker</h3>
<p>Generally we are offering the images through
<a href="https://quay.io/repository/webhippie/terrastate">quay.io/webhippie/terrastate</a> and <a href="https://hub.docker.com/r/webhippie/terrastate">webhippie/terrastate</a>, so
feel free to choose one of the providers. Maybe we will come up with Kustomize
manifests or some Helm chart.</p>
<h3 id="binaries">Binaries</h3>
<p>Simply download a binary matching your operating system and your architecture
from our <a href="https://dl.webhippie.de/#terrastate/">downloads</a> or the GitHub releases and place it within your
path like <code>/usr/local/bin</code> if you are using macOS or Linux.</p>
<h2 id="configuration">Configuration</h2>
<p>We provide overall three different variants of configuration. The variant based
on environment variables and commandline flags are split up into global values
and command-specific values.</p>
<h3 id="envrionment-variables">Envrionment variables</h3>
<p>If you prefer to configure the service with environment variables you can see
the available variables below.</p>
<h4 id="global">Global</h4>
<dl>
<dt>TERRASTATE_CONFIG_FILE</dt>
<dd>Path to optional config file</dd>
<dt>TERRASTATE_LOG_LEVEL</dt>
<dd>Set logging level, defaults to <code>info</code></dd>
<dt>TERRASTATE_LOG_COLOR</dt>
<dd>Enable colored logging, defaults to <code>true</code></dd>
<dt>TERRASTATE_LOG_PRETTY</dt>
<dd>Enable pretty logging, defaults to <code>true</code></dd>
</dl>
<h4 id="server">Server</h4>
<dl>
<dt>TERRASTATE_METRICS_ADDR</dt>
<dd>Address to bind the metrics, defaults to <code>0.0.0.0:8081</code></dd>
<dt>TERRASTATE_METRICS_TOKEN</dt>
<dd>Token to make metrics secure</dd>
<dt>TERRASTATE_SERVER_ADDR</dt>
<dd>Address to bind the server, defaults to <code>0.0.0.0:8080</code></dd>
<dt>TERRASTATE_SERVER_PPROF</dt>
<dd>Enable pprof debugging, defaults to <code>false</code></dd>
<dt>TERRASTATE_SERVER_ROOT</dt>
<dd>Root path of the server, defaults to <code>/</code></dd>
<dt>TERRASTATE_SERVER_HOST</dt>
<dd>External access to server, defaults to <code>http://localhost:8080</code></dd>
<dt>TERRASTATE_SERVER_CERT</dt>
<dd>Path to cert for SSL encryption</dd>
<dt>TERRASTATE_SERVER_KEY</dt>
<dd>Path to key for SSL encryption</dd>
<dt>TERRASTATE_SERVER_STRICT_CURVES</dt>
<dd>Use strict SSL curves, defaults to <code>false</code></dd>
<dt>TERRASTATE_SERVER_STRICT_CIPHERS</dt>
<dd>Use strict SSL ciphers, defaults to <code>false</code></dd>
<dt>TERRASTATE_SERVER_STORAGE</dt>
<dd>Folder for storing the states, defaults to <code>storage/</code></dd>
<dt>TERRASTATE_ENCRYPTION_SECRET</dt>
<dd>Secret for file encryption</dd>
<dt>TERRASTATE_ACCESS_USERNAME</dt>
<dd>Username for basic auth</dd>
<dt>TERRASTATE_ACCESS_PASSWORD</dt>
<dd>Password for basic auth</dd>
</dl>
<h4 id="health">Health</h4>
<dl>
<dt>TERRASTATE_METRICS_ADDR</dt>
<dd>Address to bind the metrics, defaults to <code>0.0.0.0:8081</code></dd>
</dl>
<h4 id="state">State</h4>
<dl>
<dt>TERRASTATE_SERVER_STORAGE</dt>
<dd>Folder for storing the states, defaults to <code>storage/</code></dd>
<dt>TERRASTATE_ENCRYPTION_SECRET</dt>
<dd>Secret for file encryption</dd>
</dl>
<h3 id="commandline-flags">Commandline flags</h3>
<p>If you prefer to configure the service with commandline flags you can see the
available variables below.</p>
<h4 id="global-1">Global</h4>
<dl>
<dt>&ndash;config-file</dt>
<dd>Path to optional config file</dd>
<dt>&ndash;log-level</dt>
<dd>Set logging level, defaults to <code>info</code></dd>
<dt>&ndash;log-color</dt>
<dd>Enable colored logging, defaults to <code>true</code></dd>
<dt>&ndash;log-pretty</dt>
<dd>Enable pretty logging, defaults to <code>true</code></dd>
</dl>
<h4 id="server-1">Server</h4>
<dl>
<dt>&ndash;metrics-addr</dt>
<dd>Address to bind the metrics, defaults to <code>0.0.0.0:8081</code></dd>
<dt>&ndash;metrics-token</dt>
<dd>Token to make metrics secure</dd>
<dt>&ndash;server-addr</dt>
<dd>Address to bind the server, defaults to <code>0.0.0.0:8080</code></dd>
<dt>&ndash;server-pprof</dt>
<dd>Enable pprof debugging, defaults to <code>false</code></dd>
<dt>&ndash;server-root</dt>
<dd>Root path of the server, defaults to <code>/</code></dd>
<dt>&ndash;server-host</dt>
<dd>External access to server, defaults to <code>http://localhost:8080</code></dd>
<dt>&ndash;server-cert</dt>
<dd>Path to cert for SSL encryption</dd>
<dt>&ndash;server-key</dt>
<dd>Path to key for SSL encryption</dd>
<dt>&ndash;strict-curves</dt>
<dd>Use strict SSL curves, defaults to <code>false</code></dd>
<dt>&ndash;strict-ciphers</dt>
<dd>Use strict SSL ciphers, defaults to <code>false</code></dd>
<dt>&ndash;storage-path</dt>
<dd>Folder for storing the states, defaults to <code>storage/</code></dd>
<dt>&ndash;encryption-secret</dt>
<dd>Secret for file encryption</dd>
<dt>&ndash;general-username</dt>
<dd>Username for basic auth</dd>
<dt>&ndash;general-password</dt>
<dd>Password for basic auth</dd>
</dl>
<h4 id="health-1">Health</h4>
<dl>
<dt>&ndash;metrics-addr</dt>
<dd>Address to bind the metrics, defaults to <code>0.0.0.0:8081</code></dd>
</dl>
<h4 id="state-1">State</h4>
<dl>
<dt>&ndash;storage-path</dt>
<dd>Folder for storing the states, defaults to <code>storage/</code></dd>
<dt>&ndash;encryption-secret</dt>
<dd>Secret for file encryption</dd>
</dl>
<h3 id="configuration-file">Configuration file</h3>
<p>So far we support multiple file formats like <code>json</code>, <code>yaml</code>, <code>hcl</code> and possibly
even more, if you want to get a full example configuration just take a look at
<a href="https://github.com/webhippie/terrastate/tree/master/config">our repository</a>, there you can always see the latest configuration
format. These example configs include all available options and the default
values. The configuration file will be automatically loaded if it&rsquo;s placed at
<code>/etc/terrastate/config.yml</code>, <code>${HOME}/.terrastate/config.yml</code> or
<code>$(pwd)/terrastate/config.yml</code>.</p>
<h2 id="usage">Usage</h2>
<p>The program provides a few sub-commands on execution. The available config
methods have already been mentioned above. Generally you can always see a
formated help output if you execute the binary similar to something like
<code>terrastate --help</code>.</p>

			</section>
		
			<section id="building">
				<h1>
					<a href="#building">
						Building
					</a>

					<small>
						<a href="#html">
							Back to Top
						</a>
					</small>
				</h1>

				<p>As this project is built with Go you need to install Go first. The installation
of Go is out of the scope of this document, please follow the
<a href="https://golang.org/doc/install">official documentation</a>. After the installation of Go you need to get
the sources:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">git clone https://github.com/webhippie/terrastate.git
</span></span><span class="line"><span class="cl">cd terrastate/</span></span></code></pre></div>
<p>All required tool besides Go itself are bundled by Go modules, all you need is
part of the <code>Makfile</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">make generate build</span></span></code></pre></div>
<p>Finally you should have the binary within the <code>bin/</code> folder now, give it a try
with <code>./bin/terrastate -h</code> to see all available options.</p>

			</section>
		
			<section id="license">
				<h1>
					<a href="#license">
						License
					</a>

					<small>
						<a href="#html">
							Back to Top
						</a>
					</small>
				</h1>

				This project is licensed under the <a href="https://github.com/webhippie/terrastate/blob/master/LICENSE">Apache 2.0</a> license. For the
license of the used libraries you have to check the respective sources.
			</section>
		
	</body>
</html>
